(this["webpackJsonpweb-kedasi"]=this["webpackJsonpweb-kedasi"]||[]).push([[0],{117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(47),r=a.n(s),c=(a(82),a(17)),i=a(73),l=a(18),o=a(21),d=a(4),j=a(6),u=a(7),b=a(13),h=a(14),m=a(1),g=a.n(m),O=a(42);a(84),a(125),a(124);O.a.initializeApp({apiKey:"AIzaSyCc5ek9ssBoMX3Qq3lbZmPzPO3-DbabQYU",authDomain:"kedasi.firebaseapp.com",databaseURL:"https://kedasi-default-rtdb.firebaseio.com",projectId:"kedasi",storageBucket:"kedasi.appspot.com",messagingSenderId:"1005977900028",appId:"1:1005977900028:web:5ca8737e2de38ab5085879",measurementId:"G-D3857WHYJZ"});var p=O.a.auth(),f=(O.a.database(),O.a.storage()),x=O.a,v=a(0),N=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={listNotifikasi:[],listHistoryChat:[],totalUnreadNotification:0},e.getDeferentTime=function(e){var t=new Date(e),a=(new Date).getTime()-t.getTime(),n=Math.round(a/6e4),s=Math.round(a/36e5),r=Math.round(a/864e5);return n<=60?n+" Minute":s<=24?s+" Hours":r+" Days"},e.handleGetDataNotification=function(){return x.database().ref("/notifikasi/").on("value",(function(t){var a=[];t.exists()?Object.keys(t.val()).map((function(e){return a.push({id:e,data:t.val()[e]}),a})):console.log("Data tidak ditemukan"),e.setState({listNotifikasi:a},(function(){e.getDeferentTime(),e.getTotalUnreadNotification()}))}))},e.getTotalUnreadNotification=function(){var t=0,a=e.state.listNotifikasi.length,n=function(a){"Unread"===e.state.listNotifikasi[a].data.Status&&(t+=1,e.setState({totalUnreadNotification:t}))},s=0;if(a>=1)do{n(s),s++}while(s<a)},e.getListPrimarykeyUserWasChat=function(){x.database().ref("/chat/").on("value",(function(t){var a=[];t.exists()?Object.keys(t.val()).map((function(e){return a.push({id:e}),a})):console.log("tidak chat"),e.setState({listHistoryChat:a},(function(){e.handleHistoryChat()}))}))},e.handleHistoryChat=Object(d.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],e.state.listHistoryChat.length>0?e.state.listHistoryChat.map(function(){var t=Object(d.a)(g.a.mark((function t(n){var s,r,c,i,l,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dataUserForHistoryChat(n.id);case 2:return s=t.sent,t.next=5,e.dataLastChat(n.id);case 5:r=t.sent,c=s[0].nama,i=s[0].photo,l=r[0].tanggal,o=r[0].lastChat,a.push({id:n.id,nama:c,photo:i,tanggalLastChat:l,lastChat:o}),e.setState({listHistoryChat:a},(function(){}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):console.log("data kosong");case 2:case"end":return t.stop()}}),t)}))),e.dataUserForHistoryChat=function(e){var t=[];return new Promise((function(a){x.database().ref("/users/"+e).on("value",(function(e){t.push({nama:e.val()&&e.val().Nama,photo:e.val()&&e.val().Profile_Picture}),a(t)}))}))},e.dataLastChat=function(e){var t=[];return new Promise((function(a){x.database().ref("/chat/"+e).limitToLast(1).on("value",(function(e){Object.keys(e.val()).map((function(a){return t.push({lastChat:e.val()&&e.val()[a].Pesan,tanggal:e.val()&&e.val()[a].Waktu}),t})),a(t)}))}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.handleGetDataNotification(),this.getListPrimarykeyUserWasChat()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{children:Object(v.jsxs)("nav",{className:"main-header navbar navbar-expand navbar-white navbar-light",children:[Object(v.jsx)("ul",{className:"navbar-nav",children:Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(l.b,{className:"nav-link","data-widget":"pushmenu",to:"#",role:"button",children:Object(v.jsx)("i",{className:"fas fa-bars"})})})}),Object(v.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(v.jsxs)("li",{className:"nav-item dropdown",children:[Object(v.jsx)(l.b,{className:"nav-link","data-toggle":"dropdown",to:"#",children:Object(v.jsx)("i",{className:"far fa-comments"})}),Object(v.jsxs)("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[this.state.listHistoryChat.length>0?Object(v.jsx)(n.Fragment,{children:this.state.listHistoryChat.map((function(t){var a=e.getDeferentTime(t.tanggalLastChat);return Object(v.jsxs)(n.Fragment,{children:[Object(v.jsx)(l.b,{to:"/pesan",className:"dropdown-item",children:Object(v.jsxs)("div",{className:"media",children:[null!=t.photo?Object(v.jsx)("img",{src:t.photo,alt:"User Avatar",className:"img-size-50 img-circle mr-3",style:{height:"50px"}}):Object(v.jsx)("img",{src:"dist/img/no-image.png",alt:"User Avatar",className:"img-size-50 img-circle mr-3",style:{height:"50px"}}),Object(v.jsxs)("div",{className:"media-body",children:[Object(v.jsxs)("h3",{className:"dropdown-item-title",children:[t.nama,Object(v.jsx)("span",{className:"float-right text-sm text-muted"})]}),Object(v.jsx)("p",{className:"text-sm",children:t.lastChat}),Object(v.jsxs)("p",{className:"text-sm text-muted",children:[Object(v.jsx)("i",{className:"far fa-clock mr-1"}),a]})]})]})}),Object(v.jsx)("div",{className:"dropdown-divider"})]},t.id)}))}):null,Object(v.jsx)(l.b,{to:"/pesan",className:"dropdown-item dropdown-footer",children:"See All Messages"})]})]}),Object(v.jsxs)("li",{className:"nav-item dropdown",children:[Object(v.jsxs)("a",{className:"nav-link","data-toggle":"dropdown",href:"/",children:[Object(v.jsx)("i",{className:"far fa-bell"}),Object(v.jsx)("span",{className:"badge badge-warning navbar-badge",children:this.state.totalUnreadNotification>0?this.state.totalUnreadNotification:null})]}),Object(v.jsxs)("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[Object(v.jsx)(l.b,{to:"/notifikasi",children:Object(v.jsxs)("span",{className:"dropdown-item dropdown-header",children:[this.state.listNotifikasi.length," Notifications"]})}),this.state.listNotifikasi.length>0?Object(v.jsx)(n.Fragment,{children:this.state.listNotifikasi.map((function(t){var a=e.getDeferentTime(t.data.Date);return Object(v.jsxs)(n.Fragment,{children:[Object(v.jsx)("div",{className:"dropdown-divider"}),Object(v.jsxs)(l.b,{to:"/notifikasi",className:"dropdown-item text-truncate",children:["Read"!==t.data.Status?Object(v.jsx)("i",{className:"fa fa-circle text-success mr-2"}):Object(v.jsx)("i",{className:"fas fa-circle text-light mr-2"}),t.data.Judul,Object(v.jsx)("span",{className:"float-right text-muted text-sm",children:a})]})]},t.id)}))}):null,Object(v.jsx)("div",{className:"dropdown-divider"}),Object(v.jsx)(l.b,{to:"/notifikasi",className:"dropdown-item dropdown-footer",children:"See All Notifications"})]})]}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(l.b,{className:"nav-link","data-widget":"fullscreen",to:"#",role:"button",onClick:function(e){return e.preventDefault()},children:Object(v.jsx)("i",{className:"fas fa-expand-arrows-alt"})})})]})]})})}}]),a}(n.Component),y=N,k=a(12);a(95);var w=Object(o.i)((function(e){var t=Object(o.h)(),a=Object(n.useState)(""),s=Object(k.a)(a,2),r=s[0],c=s[1],i=Object(n.useState)({nama:"",foto:""}),d=Object(k.a)(i,2),j=d[0],u=d[1];Object(n.useEffect)((function(){"/ruangan"===t.pathname?c("ruangan"):"/notifikasi"===t.pathname?c("notifikasi"):"/pesan"===t.pathname?c("pesan"):c(""),b()}),[t]);var b=function(){var e=JSON.parse(localStorage.getItem("UserId"));return x.database().ref("/users/"+e).once("value").then((function(e){u({nama:e.val()&&e.val().Nama,foto:e.val()&&e.val().Profile_Picture})}),(function(e){e&&console.log("read failed",e)}))};return Object(v.jsx)("div",{children:Object(v.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary elevation-4 menu-samping",children:[Object(v.jsxs)(l.b,{to:"/",className:"brand-link",children:[Object(v.jsx)("img",{src:"dist/img/logo-header.png",alt:"AdminLTE-Logo",className:"brand-image "}),Object(v.jsx)("br",{})]}),Object(v.jsxs)("div",{className:"sidebar",children:[Object(v.jsx)(l.b,{to:"/profile",className:"d-block",children:Object(v.jsxs)("div",{className:"user-panel mt-3 pb-3 mb-3 d-flex",children:[Object(v.jsx)("div",{className:"image",children:null!=j.foto?Object(v.jsx)("img",{src:j.foto,className:"img-circle elevation-2",style:{height:"34px"},alt:"User_Image",onError:function(e){var t=e.currentTarget;t.onerror=null,t.src="dist/img/no-image.png"}}):Object(v.jsx)("img",{src:"dist/img/no-image.png",className:"img-circle elevation-2",style:{height:"34px"},alt:"User_Image",onError:function(e){var t=e.currentTarget;t.onerror=null,t.src="dist/img/no-image.png"}})}),Object(v.jsx)("div",{className:"info",children:j.nama})]})}),Object(v.jsx)("nav",{className:"mt-2",children:Object(v.jsxs)("ul",{className:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsxs)(l.b,{to:"/ruangan",className:"nav-link ".concat("ruangan"===r?"active":""),children:[Object(v.jsx)("i",{className:"nav-icon fas fa-book"}),Object(v.jsx)("p",{children:"Reservasi Ruangan"})]})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsxs)(l.b,{to:"/notifikasi",className:"nav-link ".concat("notifikasi"===r?"active":""),children:[Object(v.jsx)("i",{className:"nav-icon fas fa-bell"}),Object(v.jsx)("p",{children:"Notifikasi"})]})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsxs)(l.b,{to:"/pesan",className:"nav-link ".concat("pesan"===r?"active":""),children:[Object(v.jsx)("i",{className:"nav-icon fas fa-inbox"}),Object(v.jsx)("p",{children:"Pesan"})]})}),Object(v.jsx)("li",{className:"nav-item",onClick:function(){localStorage.removeItem("UserId"),localStorage.removeItem("UserEmail"),p.signOut()},children:Object(v.jsxs)(l.b,{to:"/logout",className:"nav-link",children:[Object(v.jsx)("i",{className:"nav-icon fas fa-sign-out-alt"}),Object(v.jsx)("p",{children:"Logout"})]})})]})})]})]})})}));var S=function(){return Object(v.jsx)("div",{children:Object(v.jsxs)("footer",{className:"main-footer",children:[Object(v.jsxs)("strong",{children:["Copyright \xa9 2014-2021 ",Object(v.jsx)("a",{href:"https://adminlte.io",children:"AdminLTE.io"}),"."]}),"All rights reserved.",Object(v.jsxs)("div",{className:"float-right d-none d-sm-inline-block",children:[Object(v.jsx)("b",{children:"Version"})," 3.1.0"]})]})})},P=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={listOrder:[],totalStatus:[{totalActive:0,totalPending:0,totalDone:0,totalCancel:0}]},e.handleGetData=function(){return x.database().ref("/order/").on("value",(function(t){var a=[];t.exists()?Object.keys(t.val()).map((function(e){return a.push({id:e,data:t.val()[e]}),a})):console.log("Data tidak ditemukan"),e.setState({listOrder:a},(function(){console.log("List Order: ",a),e.handleTotalOrderStatus()}))}))},e.handleTotalOrderStatus=function(){var t=e.state.listOrder.length,a=0,n=0,s=0,r=0,c=function(){var t=Object(d.a)(g.a.mark((function t(c){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"Active"===e.state.listOrder[c].data.Status?a+=1:"Menunggu Pembayaran"===e.state.listOrder[c].data.Status?n+=1:"Selesai"===e.state.listOrder[c].data.Status?s+=1:"Batal"===e.state.listOrder[c].data.Status&&(r+=1);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=0;if(t>=1)do{c(i),i++}while(i<t);e.setState({totalStatus:[{totalActive:a,totalPending:n,totalDone:s,totalCancel:r}]},(function(){console.log(e.state.totalStatus[0])}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.handleGetData()}},{key:"componentWillUnmount",value:function(){this.handleGetData()}},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"content-header",children:Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsxs)("div",{className:"row mb-2",children:[Object(v.jsx)("div",{className:"col-sm-6",children:Object(v.jsx)("h1",{className:"m-0",children:"Dashboard"})}),Object(v.jsx)("div",{className:"col-sm-6",children:Object(v.jsxs)("ol",{className:"breadcrumb float-sm-right",children:[Object(v.jsx)("li",{className:"breadcrumb-item",children:Object(v.jsx)("a",{href:"/",children:"Home"})}),Object(v.jsx)("li",{className:"breadcrumb-item active",children:"Dashboard"})]})})]})})}),Object(v.jsx)("section",{className:"content",children:Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-lg-3 col-6",children:Object(v.jsxs)("div",{className:"small-box bg-success",children:[Object(v.jsxs)("div",{className:"inner",children:[Object(v.jsxs)("h3",{children:[" ",this.state.totalStatus[0].totalActive," "]}),Object(v.jsx)("p",{children:"Orders Active"})]}),Object(v.jsx)("div",{className:"icon",children:Object(v.jsx)("i",{className:"ion ion-bag"})}),Object(v.jsxs)(l.b,{to:"/ruangan",className:"small-box-footer",children:["More info ",Object(v.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}),Object(v.jsx)("div",{className:"col-lg-3 col-6",children:Object(v.jsxs)("div",{className:"small-box bg-warning",children:[Object(v.jsxs)("div",{className:"inner",children:[Object(v.jsxs)("h3",{children:[" ",this.state.totalStatus[0].totalPending," "]}),Object(v.jsx)("p",{children:"Unpaid Order"})]}),Object(v.jsx)("div",{className:"icon",children:Object(v.jsx)("i",{className:"ion ion-stats-bars"})}),Object(v.jsxs)(l.b,{to:"/ruangan",className:"small-box-footer",children:["More info ",Object(v.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}),Object(v.jsx)("div",{className:"col-lg-3 col-6",children:Object(v.jsxs)("div",{className:"small-box bg-secondary",children:[Object(v.jsxs)("div",{className:"inner",children:[Object(v.jsxs)("h3",{children:[" ",this.state.totalStatus[0].totalDone," "]}),Object(v.jsx)("p",{children:"Order Done"})]}),Object(v.jsx)("div",{className:"icon",children:Object(v.jsx)("i",{className:"ion ion-person-add"})}),Object(v.jsxs)(l.b,{to:"/ruangan",className:"small-box-footer",children:["More info ",Object(v.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})}),Object(v.jsx)("div",{className:"col-lg-3 col-6",children:Object(v.jsxs)("div",{className:"small-box bg-danger",children:[Object(v.jsxs)("div",{className:"inner",children:[Object(v.jsxs)("h3",{children:[" ",this.state.totalStatus[0].totalCancel," "]}),Object(v.jsx)("p",{children:"Order Cancel"})]}),Object(v.jsx)("div",{className:"icon",children:Object(v.jsx)("i",{className:"ion ion-pie-graph"})}),Object(v.jsxs)(l.b,{to:"/ruangan",className:"small-box-footer",children:["More info ",Object(v.jsx)("i",{className:"fas fa-arrow-circle-right"})]})]})})]})})})]})}}]),a}(n.Component),A=P,D=a(52),C=a.n(D),I=a(53),T=a.n(I);var U=function(e){T.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}).fire({icon:e[0].icon,title:e[0].title})};var M=function(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)("PERJAM"),i=Object(k.a)(c,2),l=i[0],o=i[1],j=Object(n.useState)("1"),u=Object(k.a)(j,2),b=u[0],h=u[1],m=Object(n.useState)(""),O=Object(k.a)(m,2),p=O[0],f=O[1],N=Object(n.useState)("ROOM 000"),y=Object(k.a)(N,2),w=y[0],S=y[1],P=Object(n.useState)(""),A=Object(k.a)(P,2),D=A[0],I=A[1],T=Object(n.useState)(""),M=Object(k.a)(T,2),R=M[0],B=M[1],F=Object(n.useState)(""),E=Object(k.a)(F,2),L=E[0],J=E[1],H=Object(n.useState)(),_=Object(k.a)(H,2),G=_[0],z=_[1],Y=Object(n.useState)("Active"),V=Object(k.a)(Y,2),K=V[0],q=V[1],$=Object(n.useState)(0),W=Object(k.a)($,2),Q=W[0],Z=W[1];Object(n.useEffect)((function(){!1===s&&r(!0);var e=Intl.NumberFormat("en-US");Z("PERJAM"===l?e.format(3e4*b):"HARIAN"===l?e.format(1e5*b):"HARIAN(PELAJAR)"===l?e.format(75e3*b):"BULANAN 25JAM"===l?e.format(45e4*b):"BULANAN 50JAM"===l?e.format(65e4*b):"BULANAN 100JAM"===l?e.format(9e5*b):"BULANAN TANPA BATAS"===l?e.format(12e5*b):0)}),[s,l,b]);var X=function(){var e=Object(d.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:a=e.sent,t.preventDefault(),console.log(t),console.log("Order Id: ",t.target[0].value),console.log("Paket: ",l),console.log("Jumlah Paket: ",b),console.log("Nama Costumer: ",t.target[3].value),console.log("Ruangan: ",t.target[4].value),console.log("Tanggal Mulai: ",R),console.log("Tanggal Selesai: ",L),console.log("StatusPembayaran: ",K),console.log("Total Pembayaran",Q),console.log("Jatuh Tempo",a),""===p?U([{icon:"error",title:"Nama costumer tidak boleh kosong"}]):""===D?U([{icon:"error",title:"Tanggal belum di tentukan"}]):!1===G?U([{icon:"error",title:"Anda belum memeriksa ketersediaan ruangan"}]):x.database().ref("order").push({OrderId:t.target[0].value,Paket:l,JumlahPaket:b,NamaPemesan:t.target[3].value,Ruangan:t.target[4].value,TanggalSewa:R,TanggalSelesai:L,Status:K,TotalPembayaran:Q,BuktiPembayaran:"",JatuhTempo:a},(function(e){e?alert("Gagal Simpan"):(U([{icon:"success",title:"Pemesanan Ruangan Berhasil"}]),console.log("send value: ",t.target[0].value,l,b,t.target[3].value,t.target[4].value,R,L,K,Q,K,a),window.$("#modal-lg").modal("hide"),window.location.reload())}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=new Date;e.setDate(e.getDate()+2),console.log("Due Date",e);var t=te(e);return new Promise((function(e){e(t)}))},te=function(e){return e.getDate()+"-"+parseInt(e.getMonth()+1)+"-"+e.getFullYear()};return Object(v.jsx)("div",{className:"modal fade",id:"modal-lg",children:Object(v.jsx)("div",{className:"modal-dialog modal-lg",children:Object(v.jsx)("div",{className:"modal-content",children:Object(v.jsxs)("div",{className:"card card-primary",children:[Object(v.jsx)("div",{className:"card-header",children:Object(v.jsx)("h3",{className:"card-title",children:"Pesan Ruangan "})}),Object(v.jsxs)("form",{onSubmit:X,children:[Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Order ID"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"orderID",value:e.newOrderId,readOnly:!0})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Paket"}),Object(v.jsxs)("div",{className:"input-group",id:"Paket",children:[Object(v.jsxs)("select",{className:"form-control",onChange:function(e){return o(e.target.value)},children:[Object(v.jsxs)("optgroup",{label:"Casual Coworking",children:[Object(v.jsx)("option",{children:"PERJAM"}),Object(v.jsx)("option",{children:"HARIAN"}),Object(v.jsx)("option",{children:"HARIAN(PELAJAR)"})]}),Object(v.jsxs)("optgroup",{label:"Monthly Coworking",children:[Object(v.jsx)("option",{children:"BULANAN 25JAM"}),Object(v.jsx)("option",{children:"BULANAN 50JAM"}),Object(v.jsx)("option",{children:"BULANAN 100JAM"}),Object(v.jsx)("option",{children:"BULANAN TANPA BATAS"})]})]}),Object(v.jsx)("div",{className:"input-group-append",children:Object(v.jsx)("input",{style:{width:"50px",paddingLeft:"10px"},type:"number",id:"quantity",name:"quantity",min:"1",defaultValue:b,onChange:function(e){return h(e.target.value)}})})]})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Nama Pemesan"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"NamaPemesan",placeholder:"Nama Pemesan",onChange:function(e){return f(e.target.value)}})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Ruangan"}),Object(v.jsxs)("select",{className:"form-control",onChange:function(e){return S(e.target.value)},children:[Object(v.jsx)("option",{children:"ROOM 000"}),Object(v.jsx)("option",{children:"ROOM 001"}),Object(v.jsx)("option",{children:"ROOM 002"}),Object(v.jsx)("option",{children:"ROOM 003"}),Object(v.jsx)("option",{children:"ROOM 004"}),Object(v.jsx)("option",{children:"ROOM 005"})]})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Tanggal Sewa:"}),Object(v.jsxs)("div",{className:"input-group date",id:"TanggalSewa","data-target-input":"nearest",children:[Object(v.jsx)(C.a,{className:"form-control ",value:D,format:"dd-MM-y",onChange:function(e){I(e),z(!1),console.log(e)}}),Object(v.jsx)("div",{className:"input-group-append",children:Object(v.jsx)("div",{className:"input-group-text",onClick:function(e){return function(e){if(console.log(l),console.log(b),console.log(w),console.log(D),""===l)U([{icon:"error",title:"Paket pesanan belum di pilih"}]);else{if(""!==D)return x.database().ref("/order/").orderByChild("Ruangan").equalTo(w).on("value",(function(e){var t=[];if(e.exists()){Object.keys(e.val()).map((function(a){return t.push({id:a,data:e.val()[a]}),t})),console.log(t),console.log(t[0].data.TanggalSewa),console.log(t[0].data.TanggalSelesai),console.log("tglMulai ",D);var a=D.getDate()+"-"+parseInt(D.getMonth()+1)+"-"+D.getFullYear();console.log("StartDate ",a),B(a);var n=new Date(D),s=Number(b),r="";"PERJAM"===l||"HARIAN"===l||"HARIAN(PELAJAR)"===l?(r=n,console.log("Perjam/Perhari")):r=new Date(new Date(n).setMonth(n.getMonth()+s));var c=r,i=c.getDate()+"-"+parseInt(c.getMonth()+1)+"-"+c.getFullYear();console.log("FinishDay ",i),J(i);var o=0,d=!0;do{if("Batal"===t[o].data.Status||"Selesai"===t[o].data.Status)console.log(o),console.log("Order ",t[o].data.OrderId,"Status ",t[o].data.Status);else{var j=t[o].data.TanggalSewa,u=t[o].data.TanggalSelesai,h=a,m=i,g=j.split("-"),O=u.split("-"),p=h.split("-"),f=m.split("-"),x=new Date(g[2],parseInt(g[1])-1,g[0]),v=new Date(O[2],parseInt(O[1])-1,O[0]),N=new Date(p[2],parseInt(p[1])-1,p[0]),y=new Date(f[2],parseInt(f[1])-1,f[0]),k=N>=x&&N<=v,S=x>=N&&x<=y;console.log("resultStart",k),console.log("resultStart2",S),!0===d&&(!0!==k&&!0!==S||(d=!1))}o++}while(o<t.length);!0===d?(z(!0),U([{icon:"success",title:"Ruangan ".concat(w," Pada tanggal ").concat(h," - ").concat(m," tersedia")}])):(z(!1),U([{icon:"error",title:"Ruangan ".concat(w," Pada tanggal ").concat(h," - ").concat(m," tidak bisa dipesan")}]))}else{console.log("tglMulai ",D);var P=D.getDate()+"-"+parseInt(D.getMonth()+1)+"-"+D.getFullYear();console.log("StartDate ",P),B(P);var A=new Date(D);"PERJAM"===l||"HARIAN"===l||"HARIAN(PELAJAR)"===l?console.log("Perjam/Perhari"):A.setMonth(A.getMonth()+b);var C=A,I=C.getDate()+"-"+parseInt(C.getMonth()+1)+"-"+C.getFullYear();console.log("FinishDay ",I),J(I),z(!0),U([{icon:"success",title:"Ruangan ".concat(w," tersedia")}])}}));U([{icon:"error",title:"Tanggal sewa tidak boleh kosong"}])}}()},children:Object(v.jsx)("i",{className:"fa fa-search"})})})]})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Status"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"icheck-success d-inline",style:{marginRight:10},children:[Object(v.jsx)("input",{type:"radio",id:"radioPrimary1",name:"r1",onClick:function(){return q("Active")},defaultChecked:!0}),Object(v.jsx)("label",{htmlFor:"radioPrimary1",children:"Active"})]}),Object(v.jsxs)("div",{className:"icheck-sunflower d-inline",style:{marginRight:10},children:[Object(v.jsx)("input",{type:"radio",id:"radioPrimary2",name:"r1",onClick:function(){return q("Menunggu Pembayaran")}}),Object(v.jsx)("label",{htmlFor:"radioPrimary2",children:"Menunggu Pembayaran"})]}),Object(v.jsxs)("div",{className:"icheck-concrete d-inline",style:{marginRight:10},children:[Object(v.jsx)("input",{type:"radio",id:"radioPrimary3",name:"r1",onClick:function(){return q("Selesai")}}),Object(v.jsx)("label",{htmlFor:"radioPrimary3",children:"Selesai"})]}),Object(v.jsxs)("div",{className:"icheck-danger d-inline",children:[Object(v.jsx)("input",{type:"radio",id:"radioPrimary4",name:"r1",onClick:function(){return q("Batal")}}),Object(v.jsx)("label",{htmlFor:"radioPrimary4",children:"Batal"})]})]})]}),Object(v.jsx)("div",{style:{marginRight:"10px",color:"green"},children:Object(v.jsxs)("h3",{className:"float-right",children:["Total Rp ",Q]})}),Object(v.jsxs)("div",{className:"card-footer",children:[Object(v.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),Object(v.jsx)("button",{type:"button",className:"btn btn-primary","data-target":"#ModalClose","data-dismiss":"modal",style:{marginLeft:10},children:"Cancel"})]})]})]})})})})},R=function(e){var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],n=function(e){return e<10&&(e="0"+e),e},s=n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds());return"".concat(t,", ").concat(e.getDate()," ").concat(a," ").concat(e.getFullYear()," ").concat(s)};var B=function(e){var t=Object(n.useState)(""),a=Object(k.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(),o=Object(k.a)(i,2),j=o[0],u=o[1],b=Object(n.useState)(0),h=Object(k.a)(b,2),m=h[0],O=h[1],p=Object(n.useState)(!0),N=Object(k.a)(p,2),y=N[0],w=N[1],S=Object(n.useState)(!1),P=Object(k.a)(S,2),A=P[0],D=P[1],I=Object(n.useState)(""),T=Object(k.a)(I,2),M=T[0],B=T[1],F=Object(n.useState)(""),E=Object(k.a)(F,2),L=E[0],J=E[1],H=Object(n.useState)(""),_=Object(k.a)(H,2),G=_[0],z=_[1],Y=Object(n.useState)(""),V=Object(k.a)(Y,2),K=V[0],q=V[1],$=Object(n.useState)("btn-success"),W=Object(k.a)($,2),Q=W[0],Z=W[1],X=Object(n.useState)({idOrder:"",pemesan:"",ruangannya:"",tglSewa:"",tglSelesai:"",statPembayaran:"",buktiPembayaran:"",jatuhTempo:""}),ee=Object(k.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)({}),se=Object(k.a)(ne,2),re=se[0],ce=se[1],ie=Object(n.useState)(""),le=Object(k.a)(ie,2),oe=le[0],de=le[1];Object(n.useEffect)((function(){!1===A&&D(!0);var e=Intl.NumberFormat("en-US");O("PERJAM"===s?e.format(3e4*j):"HARIAN"===s?e.format(1e5*j):"HARIAN(PELAJAR)"===s?e.format(75e3*j):"BULANAN 25JAM"===s?e.format(45e4*j):"BULANAN 50JAM"===s?e.format(65e4*j):"BULANAN 100JAM"===s?e.format(9e5*j):"BULANAN TANPA BATAS"===s?e.format(12e5*j):0)}),[A,s,j]),Object(n.useEffect)((function(){console.log("Detail Data",te)}),[te]);var je=function(){return new Promise((function(e){var t=te.idOrder;return x.database().ref("/order/").orderByChild("OrderId").equalTo(t).once("value",(function(t){Object.keys(t.val()).map((function(t){return e(t),t}))}))}))},ue=function(e){"Frm_Ruangan"===e.target.id?ae(Object(c.a)(Object(c.a)({},te),{},{ruangannya:e.target.value})):"radioEdit1"===e.target.id?ae(Object(c.a)(Object(c.a)({},te),{},{statPembayaran:"Active"})):"radioEdit2"===e.target.id?ae(Object(c.a)(Object(c.a)({},te),{},{statPembayaran:"Menunggu Pembayaran"})):"radioEdit3"===e.target.id?ae(Object(c.a)(Object(c.a)({},te),{},{statPembayaran:"Selesai"})):"radioEdit4"===e.target.id?ae(Object(c.a)(Object(c.a)({},te),{},{statPembayaran:"Batal"})):console.log("error")},be=function(){var e=Object(d.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=te.Paket,console.log("paket",a),console.log("total paket",te.JumlahPaket),console.log("ruanggannya",te.ruangannya),console.log("tgl sewa",oe),""!==a){e.next=9;break}U([{icon:"error",title:"Paket pesanan belum di pilih"}]),e.next=10;break;case 9:return e.abrupt("return",x.database().ref("/order/").orderByChild("Ruangan").equalTo(te.ruangannya).on("value",function(){var e=Object(d.a)(g.a.mark((function e(t){var n,s,r,i,l,o,d,u,b,h,m,O,p,f,x,v,N,y,k,S,P,A,D,C;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("tglMulai ",oe),s=(n=oe).getDate()+"-"+parseInt(n.getMonth()+1)+"-"+n.getFullYear(),console.log("StartDate 123 ",s),console.log(n),r=new Date(oe),i=Number(j),l="","PERJAM"===a||"HARIAN"===a||"HARIAN(PELAJAR)"===a?(l=r,console.log("Perjam/Perhari")):l=new Date(new Date(r).setMonth(r.getMonth()+i)),d=(o=l).getDate()+"-"+parseInt(o.getMonth()+1)+"-"+o.getFullYear(),console.log("FinishDay ",d),u=[],t.exists()){Object.keys(t.val()).map((function(e){return u.push({id:e,data:t.val()[e]}),u})),console.log(u),console.log(u[0].data.TanggalSewa),console.log(u[0].data.TanggalSelesai),b=0,h=!0;do{u[b].data.OrderId===te.idOrder?(console.log(b),console.log("current Order",u[b].data.OrderId)):"Batal"===u[b].data.Status||"Selesai"===u[b].data.Status?(console.log(b),console.log("Order ",u[b].data.OrderId,"Status ",u[b].data.Status)):(console.log(b),m=u[b].data.TanggalSewa,O=u[b].data.TanggalSelesai,p=s,f=d,x=m.split("-"),v=O.split("-"),N=p.split("-"),y=f.split("-"),k=new Date(x[2],parseInt(x[1])-1,x[0]),S=new Date(v[2],parseInt(v[1])-1,v[0]),P=new Date(N[2],parseInt(N[1])-1,N[0]),A=new Date(y[2],parseInt(y[1])-1,y[0]),D=P>=k&&P<=S,C=k>=P&&k<=A,console.log("resultStart",D),console.log("resultStart2",C),!0===h&&(!0!==D&&!0!==C||(h=!1))),b++}while(b<u.length);!0===h?(w(!0),U([{icon:"success",title:"Ruangan tersedia"}])):(w(!1),U([{icon:"error",title:"Ruangan Pada tanggal ".concat(p," - ").concat(f," tidak bisa dipesan")}]))}else console.log("Data tidak ditemukan"),w(!0),U([{icon:"success",title:"Ruangan tersedia"}]);ae(Object(c.a)(Object(c.a)({},te),{},{tglSewa:s,tglSelesai:d}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(d.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,je();case 3:a=e.sent,console.log(a),console.log("Order Id: ",te.idOrder),console.log("Paket: ",s),console.log("Jumlah Paket",j),console.log("Nama Pemesan: ",te.pemesan),console.log("Ruangan: ",te.ruangannya),console.log("Tanggal Sewa: ",te.tglSewa),console.log("Tanggal Selesai: ",te.tglSelesai),console.log("Status Pembayaran",te.statPembayaran),console.log("Total Pembayaran",m),console.log("Bukti Pembayaran",te.buktiPembayaran),console.log("Jatuh Tempo",te.jatuhTempo),""===te.pemesan?U([{icon:"error",title:"Nama pemesan tidak boleh kosong"}]):!1===y?U([{icon:"error",title:"Anda harus memeriksa ketersediaan ruangan kembali"}]):(U([{icon:"success",title:"berhasil"}]),x.database().ref("order/"+a).set({OrderId:te.idOrder,Paket:s,JumlahPaket:j,NamaPemesan:te.pemesan,Ruangan:te.ruangannya,TanggalSewa:te.tglSewa,TanggalSelesai:te.tglSelesai,Status:te.statPembayaran,TotalPembayaran:m,BuktiPembayaran:te.buktiPembayaran,JatuhTempo:te.jatuhTempo},(function(e){e?alert("Gagal Simpan"):(U([{icon:"success",title:"Perbaruan Pemesanan Ruangan Berhasil"}]),console.log("send value: ",te.idOrder,s,j,te.pemesan,te.ruangannya,te.tglSewa,te.tglSelesai,te.statPembayaran,m,te.buktiPembayaran,te.jatuhTempo))})),window.$("#form-edit").modal("hide"));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var t=Object(d.a)(g.a.mark((function t(a){var n,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je();case 2:n=t.sent,"Upload"===G?""===M?(console.log("Foto belum  di pilih"),U([{icon:"error",title:"File belum di pilih"}])):(s=e.dataDetail.OrderId+K,f.ref("payment/".concat(s)).put(M).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);J(t+" %"),z("Uploading"),Z("btn-danger"),console.log(t+" %")}),(function(e){console.log(e)}),(function(){f.ref("payment").child(s).getMetadata().then((function(e){x.database().ref("order/"+n).set({OrderId:re.OrderId,Paket:re.Paket,JumlahPaket:re.JumlahPaket,NamaPemesan:re.NamaPemesan,Ruangan:re.Ruangan,TanggalSewa:re.TanggalSewa,TanggalSelesai:re.TanggalSelesai,Status:re.Status,TotalPembayaran:re.TotalPembayaran,BuktiPembayaran:e.name,JatuhTempo:re.JatuhTempo},(function(t){t?alert("Gagal Simpan Ke Database"):(pe(),U([{icon:"success",title:"Bukti Pembayaran Berhasil Di Upload"}]),ae(Object(c.a)(Object(c.a)({},te),{},{buktiPembayaran:e.name})),B(null),z("View"),J(s),Z("btn-warning"))}))}))}))):"View"===G?ge():"Submit Payment"===G&&document.getElementById("InputPaymentFoto").click();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ge=function(t){f.ref("payment").child(e.dataDetail.BuktiPembayaran).getDownloadURL().then((function(e){window.open(e,"_blank","noopener,noreferrer")}))},Oe=function(){var e=Object(d.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("OrderId",JSON.stringify(te.idOrder));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(d.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=Object(d.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,x.database().ref("users").once("value",(function(e){Object.keys(e.val()).map((function(a){return t.push({id:a,data:e.val()[a]}),null}))}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t().then(function(){var e=Object(d.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.map((function(e){var t=e.data.order;return null!=t&&Object.keys(t).map((function(a){if(t[a].OrderId===te.idOrder){var n,s=null===(n=e.data)||void 0===n?void 0:n.TokenNotif;if(null!=s){fe(s);var r=e.id,c=xe(r);console.log(c)}}return null})),null}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(d.a)(g.a.mark((function e(t){var a,n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={to:t,priority:"high",notification:{title:"Konfirmasi Pembayaran",body:"Pesanan anda dengan OrderId ".concat(te.idOrder," telah dikonfirmasi pembayarannya")},data:{Action:"CheckOut",OrderID:te.idOrder}},e.next=3,fetch("https://fcm.googleapis.com/fcm/send",{method:"POST",headers:{Authorization:"key=AAAA6jj0k_w:APA91bFVagvVrQ1UsvzH-GglbdFAzvfuGhE1A6KABx3Y3QdiiyKNba9RG6zAkYqm3oAd23M-l7BuhzatGHAOHln6L2lho1ZrhMUM5DB678r2Z9_Bd79z46HCiezO9q9zD6CaiTa_h6C2","Content-Type":"application/json"},body:JSON.stringify(a)}).then(console.log(a));case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,console.log(s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(d.a)(g.a.mark((function e(t){var a,n,s,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=R(new Date),n="",s=x.database().ref("users/".concat(t,"/notifikasi")),r=s.push(),e.next=6,r.set({Aksi:"CheckOut",Date:a,Isi:"Pesanan anda dengan OrderId ".concat(te.idOrder," telah dikonfirmasi pembayarannya"),Judul:"Konfirmasi Pembayaran",Meta_Data:te.idOrder,Status:"Unread",Target:t},(function(e){e?alert("Gagal Simpan"):n="Berhasil Membuat Notifikasi di Database"}));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"detailorder modal fade ",id:"form-edit",onMouseEnter:function(){if(!0!==e.editStatus)return null;var t=e.dataDetail;console.log("Datanya",t),ae({idOrder:t.OrderId,pemesan:t.NamaPemesan,ruangannya:t.Ruangan,tglSewa:t.TanggalSewa,tglSelesai:t.TanggalSelesai,statPembayaran:t.Status,buktiPembayaran:t.BuktiPembayaran,jatuhTempo:null===t||void 0===t?void 0:t.JatuhTempo}),r(t.Paket),u(t.JumlahPaket),O(t.TotalPembayaran),ce({OrderId:t.OrderId,Paket:t.Paket,JumlahPaket:t.JumlahPaket,NamaPemesan:t.NamaPemesan,Ruangan:t.Ruangan,TanggalSewa:t.TanggalSewa,TanggalSelesai:t.TanggalSelesai,Status:t.Status,TotalPembayaran:t.TotalPembayaran,BuktiPembayaran:t.BuktiPembayaran,JatuhTempo:t.JatuhTempo}),""===t.BuktiPembayaran?(z("Submit Payment"),J("Choose File"),Z("btn-success")):(z("View"),J(e.dataDetail.BuktiPembayaran),Z("btn-warning"));var a=t.TanggalSewa.split("-"),n=new Date(a[2],parseInt(a[1])-1,a[0]);de(n),e.disableModeEdit()},children:Object(v.jsx)("div",{className:"modal-dialog modal-lg",children:Object(v.jsx)("div",{className:"modal-content",children:Object(v.jsxs)("div",{className:"card card-primary",children:[Object(v.jsxs)("div",{className:"card-header",children:[Object(v.jsx)("h3",{className:"card-title",children:"Detail Pesan Ruangan"}),Object(v.jsx)(l.b,{to:"/invoice",target:"_blank",onClick:Oe,children:Object(v.jsx)("i",{className:"fa fa-print float-right"})})]}),Object(v.jsxs)("form",{onSubmit:he,children:[Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Order ID"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"orderID",defaultValue:te.idOrder,readOnly:!0})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Paket"}),Object(v.jsxs)("div",{className:"input-group",id:"Paket",children:[Object(v.jsxs)("select",{className:"form-control",value:s,onChange:function(e){r(e.target.value),w(!1)},children:[Object(v.jsxs)("optgroup",{label:"Casual Coworking",children:[Object(v.jsx)("option",{children:"PERJAM"}),Object(v.jsx)("option",{children:"HARIAN"}),Object(v.jsx)("option",{children:"HARIAN(PELAJAR)"})]}),Object(v.jsxs)("optgroup",{label:"Monthly Coworking",children:[Object(v.jsx)("option",{children:"BULANAN 25JAM"}),Object(v.jsx)("option",{children:"BULANAN 50JAM"}),Object(v.jsx)("option",{children:"BULANAN 100JAM"}),Object(v.jsx)("option",{children:"BULANAN TANPA BATAS"})]})]}),Object(v.jsx)("div",{className:"input-group-append",children:Object(v.jsx)("input",{style:{width:"50px",paddingLeft:"10px"},type:"number",id:"quantity",name:"quantity",min:"1",defaultValue:j,onChange:function(e){u(e.target.value),w(!1)}})})]})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Nama Pemesan"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"NamaPemesan",placeholder:"Nama Panjang",defaultValue:te.pemesan,onChange:function(e){return ae(Object(c.a)(Object(c.a)({},te),{},{pemesan:e.target.value}))}})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Ruangan"}),Object(v.jsxs)("select",{className:"form-control",id:"Frm_Ruangan",value:te.ruangannya,onChange:function(e){ue(e),w(!1)},children:[Object(v.jsx)("option",{children:"ROOM 000"}),Object(v.jsx)("option",{children:"ROOM 001"}),Object(v.jsx)("option",{children:"ROOM 002"}),Object(v.jsx)("option",{children:"ROOM 003"}),Object(v.jsx)("option",{children:"ROOM 004"}),Object(v.jsx)("option",{children:"ROOM 005"})]})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Tanggal Sewa:"}),Object(v.jsxs)("div",{className:"input-group date",id:"TanggalSewa","data-target-input":"nearest",children:[Object(v.jsx)(C.a,{className:"form-control ",value:oe,format:"dd-MM-y",onChange:function(e){de(e),w(!1)}}),Object(v.jsx)("div",{className:"input-group-append",children:Object(v.jsx)("div",{className:"input-group-text",onClick:function(e){return be(e)},children:Object(v.jsx)("i",{className:"fa fa-search"})})})]})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Status"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"icheck-success d-inline",style:{marginRight:10},children:[Object(v.jsx)("input",{type:"radio",id:"radioEdit1",name:"r1",checked:"Active"===te.statPembayaran,onChange:ue}),Object(v.jsx)("label",{htmlFor:"radioEdit1",children:"Active"})]}),Object(v.jsxs)("div",{className:"icheck-sunflower d-inline",style:{marginRight:10},children:[Object(v.jsx)("input",{type:"radio",id:"radioEdit2",name:"r1",checked:"Menunggu Pembayaran"===te.statPembayaran,onChange:ue}),Object(v.jsx)("label",{htmlFor:"radioEdit2",children:"Menunggu Pembayaran"})]}),Object(v.jsxs)("div",{className:"icheck-concrete d-inline",style:{marginRight:10},children:[Object(v.jsx)("input",{type:"radio",id:"radioEdit3",name:"r1",checked:"Selesai"===te.statPembayaran,onChange:ue}),Object(v.jsx)("label",{htmlFor:"radioEdit3",children:"Selesai"})]}),Object(v.jsxs)("div",{className:"icheck-danger d-inline",children:[Object(v.jsx)("input",{type:"radio",id:"radioEdit4",name:"r1",checked:"Batal"===te.statPembayaran,onClick:ue,onChange:ue}),Object(v.jsx)("label",{htmlFor:"radioEdit4",children:"Batal"})]})]})]}),Object(v.jsx)("div",{className:"d-flex  flex-row-reverse ",style:{marginRight:"10px",color:"green"},children:Object(v.jsxs)("h3",{children:["Total Rp ",m]})}),Object(v.jsx)("div",{className:"card-footer",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-3",children:[Object(v.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update"}),Object(v.jsx)("button",{type:"button",className:"btn btn-primary","data-target":"#ModalClose","data-dismiss":"modal",style:{marginLeft:10},children:"Cancel"})]}),Object(v.jsx)("div",{className:"input-group d-block col-9",children:Object(v.jsxs)("div",{className:"row d-flex flex-row-reverse",children:[Object(v.jsx)("div",{className:"input-group-append",children:Object(v.jsxs)("span",{className:"btn ".concat(Q),onClick:me,children:[Object(v.jsx)("i",{className:"far fa-credit-card"}),"\xa0",G]})}),Object(v.jsxs)("div",{className:"custom-file col-6",children:[Object(v.jsx)("input",{type:"file",className:"custom-file-input",id:"InputPaymentFoto",accept:"image/png, image/jpeg, image/jpg",onChange:function(e){var t;console.log(e.target.files[0]),B(e.target.files[0]),J(null===(t=e.target.files[0])||void 0===t?void 0:t.name),z("Upload"),Z("btn-primary"),"image/png"===e.target.files[0].type?q(".png"):"image/jpeg"===e.target.files[0].type?q(".jpeg"):"image/jpg"===e.target.files[0].type&&q(".jpg")}}),Object(v.jsx)("label",{className:"custom-file-label",htmlFor:"exampleInputFile",children:Object(v.jsx)("b",{children:L})})]})]})})]})})]})]})})})})},F=a(76),E=a.n(F),L=(a(117),function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={orderList:[],orderDetail:"",modeEdit:!1,nextOrderId:"",valDateRange:[new Date,new Date],isFilterActive:!1},e.handleGetData=function(){return x.database().ref("/order/").on("value",(function(t){var a=[];t.exists()?Object.keys(t.val()).map((function(e){return a.push({id:e,data:t.val()[e]}),a})):console.log("Data tidak ditemukan"),e.setState({orderList:a},(function(){window.$("#table_ruangan").DataTable({paging:!0,lengthChange:!1,searching:!0,ordering:!0,info:!0,autoWidth:!1,responsive:!1,order:[[0,"desc"]]}),window.$.fn.dataTable.ext.errMode="none",window.$("#table_ruangan").on("error.dt",(function(e,t,a,n){console.log("An error has been reported by DataTables: ",n)}))})),console.log("List Order: ",a)}))},e.handleNextOrderId=function(){var t=""+(e.state.orderList.length+1),a="0000",n="ORD"+(a.substring(0,a.length-t.length)+t);e.setState({nextOrderId:n}),console.log(n)},e.handleEdit=function(t){e.setState({modeEdit:!0});var a=t.target.parentNode.children[0].innerText;return console.log(a),x.database().ref("/order/").orderByChild("OrderId").equalTo(a).on("value",(function(t){var a=[];t.exists()?Object.keys(t.val()).map((function(e){return a.push({id:e,data:t.val()[e]}),a})):console.log("Data tidak ditemukan"),e.setState({orderDetail:a[0].data})}))},e.trunOffModeEdit=function(){e.setState({modeEdit:!1})},e.handleFilter=function(e){window.$("#table_ruangan").DataTable().draw()},e.handleSorting=function(e,t){var a=e.data.OrderId,n=t.data.OrderId,s=Array.from(a);s.splice(0,3);var r=Number(s.join("")),c=Array.from(n);return c.splice(0,3),Number(c.join(""))-r},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.handleGetData();var e=this;window.$.fn.dataTable.ext.search.push((function(t,a,n){var s=a[3].split("-"),r=new Date(s[2],parseInt(s[1])-1,s[0]),c=a[4].split("-"),i=new Date(c[2],parseInt(c[1])-1,c[0]);return!0!==e.state.isFilterActive||(null===e.state.valDateRange||(r>=e.state.valDateRange[0]&&r<=e.state.valDateRange[1]||(e.state.valDateRange[0]>=r&&e.state.valDateRange[0]<=i||void 0)))}))}},{key:"componentDidUpdate",value:function(e,t,a){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"card",children:[Object(v.jsxs)("div",{className:"card-header border-transparent",children:[Object(v.jsx)("button",{className:"btn btn-sm btn-info float-left","data-toggle":"modal","data-target":"#modal-lg",onClick:this.handleNextOrderId,children:"Buat Pesanan Baru"}),Object(v.jsx)("div",{className:"card-tools",children:Object(v.jsx)(E.a,{className:"float-right text-center",id:"IdDateRangePicker",name:"NameDateRangePicker",style:{marginRight:"20px"},onChange:function(t){return e.setState({valDateRange:t,isFilterActive:!0},(function(){console.log(e.state.valDateRange),e.handleFilter()}))},value:this.state.valDateRange})})]}),this.state.orderList.length>0?Object(v.jsx)("div",{className:"card-body p-0",children:Object(v.jsx)("div",{className:"table-responsive ",children:Object(v.jsxs)("table",{id:"table_ruangan",className:"table m-0",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Order ID"}),Object(v.jsx)("th",{children:"Nama"}),Object(v.jsx)("th",{children:"Ruangan"}),Object(v.jsx)("th",{children:"Tanggal Sewa"}),Object(v.jsx)("th",{children:"Tanggal Selesai"}),Object(v.jsx)("th",{children:"Status"})]})}),Object(v.jsx)("tbody",{children:this.state.orderList.length>0?Object(v.jsx)(n.Fragment,{children:this.state.orderList.map((function(t){var a;return a="Active"===t.data.Status?"badge badge-success":"Menunggu Pembayaran"===t.data.Status?"badge badge-warning":"Selesai"===t.data.Status?"badge badge-secondary":"badge badge-danger",Object(v.jsxs)("tr",{className:"row-pesanan","data-toggle":"modal","data-target":"#form-edit",onClick:function(t){return e.handleEdit(t)},children:[Object(v.jsx)("td",{children:t.data.OrderId}),Object(v.jsxs)("td",{children:[t.data.NamaPemesan," "]}),Object(v.jsxs)("td",{children:[t.data.Ruangan," "]}),Object(v.jsxs)("td",{children:[t.data.TanggalSewa," "]}),Object(v.jsxs)("td",{children:[t.data.TanggalSelesai," "]}),Object(v.jsx)("td",{children:Object(v.jsx)("div",{className:"".concat(a," td-status"),children:t.data.Status})})]},t.id)}))}):null})]})})}):null,Object(v.jsx)("div",{className:"card-footer clearfix"})]}),Object(v.jsx)(M,{newOrderId:this.state.nextOrderId}),Object(v.jsx)(B,{dataDetail:this.state.orderDetail,ref:this.child,editStatus:this.state.modeEdit,disableModeEdit:function(){return e.trunOffModeEdit()}})]})}}]),a}(n.Component)),J=L;var H=function(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)(""),i=Object(k.a)(c,2),l=i[0],o=i[1],j=Object(n.useState)(""),u=Object(k.a)(j,2),b=u[0],h=u[1],m=Object(n.useState)("All"),O=Object(k.a)(m,2),p=O[0],f=O[1],N=Object(n.useState)("Notification"),y=Object(k.a)(N,2),w=y[0],S=y[1],P=Object(n.useState)(""),A=Object(k.a)(P,2),D=A[0],C=A[1],I=Object(n.useState)([]),U=Object(k.a)(I,2),M=U[0],B=U[1],F=Object(n.useState)([]),E=Object(k.a)(F,2),L=E[0],J=E[1];Object(n.useEffect)((function(){window.$("#TanggalSewa").datetimepicker({format:"DD-MM-YYYY"}),window.$("#TanggalSelesai").datetimepicker({format:"DD-MM-YYYY"}),!1===s&&(H(),r(!0))}),[s]);var H=function(){return x.database().ref("users").once("value",(function(e){var t=[];e.exists()&&Object.keys(e.val()).map((function(a){return t.push({id:a,data:e.val()[a]}),t})),console.log(t),J(t)}))},_=function(){var e=Object(d.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.map((function(e){if(e.id===p){var t,a=null===(t=e.data)||void 0===t?void 0:t.TokenNotif;if("CheckOut"===w)z(a,{Action:"CheckOut",OrderID:D});else if("Notification"===w){z(a,{Action:"Notification"})}}return null})),e.next=3,Y(p);case 3:e.sent&&V();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L.map(function(){var e=Object(d.a)(g.a.mark((function e(t){var a,n,s,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.id,s=null===(a=t.data)||void 0===a?void 0:a.TokenNotif,r={Action:"Notification"},e.next=6,z(s,r);case 6:return Y(n),e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(g.a.mark((function e(t,a){var n,s,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),console.log(l,b),n={to:t,priority:"high",notification:{title:l,body:b},data:a},e.next=5,fetch("https://fcm.googleapis.com/fcm/send",{method:"POST",headers:{Authorization:"key=AAAA6jj0k_w:APA91bFVagvVrQ1UsvzH-GglbdFAzvfuGhE1A6KABx3Y3QdiiyKNba9RG6zAkYqm3oAd23M-l7BuhzatGHAOHln6L2lho1ZrhMUM5DB678r2Z9_Bd79z46HCiezO9q9zD6CaiTa_h6C2","Content-Type":"application/json"},body:JSON.stringify(n)}).then(console.log(n));case 5:return s=e.sent,e.next=8,s.json();case 8:r=e.sent,console.log(r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Y=function(){var e=Object(d.a)(g.a.mark((function e(t){var a,n,s,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=R(new Date),n=!1,s=x.database().ref("users/".concat(t,"/notifikasi")),r=s.push(),e.next=6,r.set({Aksi:w,Date:a,Isi:b,Judul:l,Meta_Data:D,Status:"Unread",Target:t},(function(e){e?alert("Gagal Simpan"):n=!0}));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){T.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}).fire({icon:"success",title:"Pemberitahuan Berhasil Di Kirim"})};Object(n.useEffect)((function(){if("All"!==p){if("CheckOut"===w)return x.database().ref("users/"+p+"/order").once("value",(function(e){var t=[];e.exists()?(Object.keys(e.val()).map((function(a){return t.push(e.val()[a].OrderId),t})),B(t),C(t[0])):(B([]),C(""))}));C("")}else C("")}),[p,w]);var K=function(){o(""),h(""),f("All"),S("Notification"),C("")};return Object(v.jsx)("div",{className:"modal fade",id:"form-notifikasi",children:Object(v.jsx)("div",{className:"modal-dialog modal-lg",children:Object(v.jsx)("div",{className:"modal-content",children:Object(v.jsxs)("div",{className:"card card-primary",children:[Object(v.jsx)("div",{className:"card-header",children:Object(v.jsx)("h3",{className:"card-title",children:"Notifikasi Baru"})}),Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Judul: ",l),console.log("isi: ",b),console.log("Target: ",p),"All"===p?G():_(),K(),window.$("#form-notifikasi").modal("hide"),window.location.reload()},children:[Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Judul"}),Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"judul notifikasi",value:l,onChange:function(e){var t=e.target;return o(t.value)}})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Isi"}),Object(v.jsx)("textarea",{type:"text",className:"form-control",rows:"3",placeholder:"isi notifikasi",value:b,onChange:function(e){var t=e.target;return h(t.value)}})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Target"}),Object(v.jsxs)("select",{className:"form-control",id:"Frm_Target_User",value:p,onChange:function(e){var t=e.target;return f(t.value)},children:[Object(v.jsx)("option",{children:"All"}),L.map((function(e){return Object(v.jsx)("option",{value:e.id,children:e.data.Nama},e.id)}))]})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Action"}),Object(v.jsxs)("select",{className:"form-control",id:"Frm_Aksi",onChange:function(e){var t=e.target;return S(t.value)},children:[Object(v.jsx)("option",{value:"Notification",children:"Pemberitahuan"}),"All"===p?null:Object(v.jsx)("option",{value:"CheckOut",children:"Transaksi"})]})]}),"CheckOut"===w?Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"ID Order"}),Object(v.jsx)("select",{className:"form-control",onChange:function(e){var t=e.target;return C(t.value)},children:M.length>0?M.map((function(e){return Object(v.jsx)("option",{children:e},e)})):Object(v.jsx)("option",{children:"User Belum Memiliki Transaksi"})})]}):null]}),Object(v.jsxs)("div",{className:"card-footer",children:[Object(v.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),Object(v.jsx)("button",{type:"button",className:"btn btn-primary","data-target":"#ModalClose","data-dismiss":"modal",style:{marginLeft:10},children:"Cancel"})]})]})]})})})})};var _=Object(o.i)((function(e){var t=Object(o.g)();return Object(n.useEffect)((function(){console.log(e)}),[e]),Object(v.jsx)("div",{className:"d-grid gap-3",onClick:function(a){return"CheckOut"===e.aksi?t.push("/ruangan"):"Chat"===e.aksi?t.push("/pesan"):"Notification"===e.aksi&&window.$("#detail-notifikasi").modal("show"),x.database().ref("notifikasi/"+e.primaryKey+"/Status").set("Read"),void e.sendData(e)},children:Object(v.jsx)("div",{className:"p-5 bg-light border",children:Object(v.jsxs)("div",{className:"row align-items-center",children:[Object(v.jsxs)("div",{className:"col",children:[Object(v.jsx)("small",{children:e.tanggal}),Object(v.jsx)("p",{children:e.isi})]}),Object(v.jsx)("span",{children:"Read"!==e.status?Object(v.jsx)("i",{className:"fa fa-circle text-success"}):null})]})})})}));var G=function(e){var t=Object(n.useState)(""),a=Object(k.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)(""),i=Object(k.a)(c,2),l=i[0],o=i[1];return Object(v.jsx)("div",{className:"modal fade",id:"detail-notifikasi",onMouseEnter:function(){return console.log("handle",e),r(e.dataDetail.data.judul),void o(e.dataDetail.data.isi)},children:Object(v.jsx)("div",{className:"modal-dialog modal-lg",children:Object(v.jsx)("div",{className:"modal-content",children:Object(v.jsxs)("div",{className:"card card-primary",children:[Object(v.jsx)("div",{className:"card-header",children:Object(v.jsx)("h3",{className:"card-title",children:s})}),Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Judul"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"Frm_Judul",placeholder:"judul notifikasi",defaultValue:s})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Isi"}),Object(v.jsx)("textarea",{type:"text",className:"form-control",rows:"3",id:"Frm_Isi",placeholder:"isi notifikasi",defaultValue:l})]})]}),Object(v.jsx)("div",{className:"card-footer",children:Object(v.jsx)("button",{type:"button",className:"btn btn-primary","data-target":"#ModalClose","data-dismiss":"modal",children:"Cancel"})})]})})})})};var z=function(){var e=Object(n.useState)([]),t=Object(k.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)([]),c=Object(k.a)(r,2),i=c[0],l=c[1],o=Object(n.useState)(!1),d=Object(k.a)(o,2),j=d[0],u=d[1],b=Object(n.useCallback)((function(){return x.database().ref("/notifikasi/").on("value",(function(e){var t=[];e.exists()?Object.keys(e.val()).map((function(a){return t.push({id:a,data:e.val()[a]}),t})):console.log("Data tidak ditemukan"),s(t)}))}),[]);return Object(n.useEffect)((function(){j||(b(),u(!0))}),[b,j,a]),console.log(a),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"card-header ",children:Object(v.jsx)("button",{className:"btn btn-primary","data-toggle":"modal","data-target":"#form-notifikasi",children:"Buat Pemperitahuan"})}),a.length>0?Object(v.jsx)(n.Fragment,{children:a.map((function(e){return Object(v.jsx)(_,{primaryKey:e.id,tanggal:e.data.Date,judul:e.data.Judul,metaData:e.data.Meta_Data,isi:e.data.Isi,pelanggan:e.data.Target,aksi:e.data.Aksi,status:e.data.Status,sendData:function(e){return t=e,console.log("params",t),void l({data:t});var t}},e.id)}))}):null,Object(v.jsx)(H,{}),Object(v.jsx)(G,{dataDetail:i})]})};a(118);var Y=function(e){return Object(v.jsxs)("div",{className:"direct-chat-msg right",children:[Object(v.jsxs)("div",{className:"direct-chat-infos clearfix",children:[Object(v.jsx)("span",{className:"direct-chat-name float-right",children:e.nama}),Object(v.jsx)("span",{className:"direct-chat-timestamp float-left",children:e.waktu})]}),Object(v.jsx)("img",{className:"direct-chat-img",src:"dist/img/kedasi logo.jpg",alt:"MessageUserImages"}),Object(v.jsx)("div",{className:"direct-chat-text",children:e.pesan})]})};var V=function(e){return Object(v.jsxs)("div",{className:"direct-chat-msg",children:[Object(v.jsxs)("div",{className:"direct-chat-infos clearfix",children:[Object(v.jsx)("span",{className:"direct-chat-name float-left",children:e.nama}),Object(v.jsx)("span",{className:"direct-chat-timestamp float-right",children:e.waktu})]}),Object(v.jsx)("img",{className:"direct-chat-img",src:e.photo?e.photo:"dist/img/no-image.png",alt:"MessageAdminImage"}),Object(v.jsx)("div",{className:"direct-chat-text",children:e.pesan})]})};function K(e){var t=Object(n.useState)(JSON.parse(localStorage.getItem("UserId"))),a=Object(k.a)(t,1)[0],s=Object(n.useState)(""),r=Object(k.a)(s,2),c=r[0],i=r[1],l=function(t){t.preventDefault();var n=e.UID,s=R(new Date);x.database().ref("chat/"+n).push({IDUser:a,Pesan:c,Waktu:s},(function(e){e?alert("Gagal Simpan"):console.log("new chat telah di buat: ")}))};return Object(v.jsxs)("div",{className:"card col-md-8 direct-chat direct-chat-primary",children:[Object(v.jsx)("div",{className:"card-header",children:Object(v.jsx)("h3",{className:"card-title",children:e.dataUser[0].nama})}),Object(v.jsx)("div",{className:"card-body",children:Object(v.jsx)("div",{className:"direct-chat-messages",children:e.chatData.length>0?Object(v.jsx)(n.Fragment,{children:e.chatData.map((function(t){return console.log(e),console.log(t),console.log(a),t.data.IDUser===a?Object(v.jsx)(Y,{nama:e.dataAdmin[0].nama,waktu:t.data.Waktu,pesan:t.data.Pesan,photo:e.dataAdmin[0].photo},t.id):Object(v.jsx)(V,{nama:e.dataUser[0].nama,waktu:t.data.Waktu,pesan:t.data.Pesan,photo:null===(n=e.dataUser[0])||void 0===n?void 0:n.photo},t.id);var n}))}):null})}),Object(v.jsx)("div",{className:"card-footer",children:Object(v.jsx)("form",{onSubmit:l,children:Object(v.jsxs)("div",{className:"input-group",children:[Object(v.jsx)("input",{type:"text",name:"message",placeholder:"Type Message ...",className:"form-control",onChange:function(e){var t=e.target;return i(t.value)}}),Object(v.jsx)("span",{className:"input-group-append",children:Object(v.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(e){return l(e)},children:"Send"})})]})})})]})}a(119);var q,$=function(e){return Object(v.jsx)("div",{className:"list-group-item list-group-item-action py-3 lh-tight","aria-current":"true",style:{paddingLeft:"10px"},onClick:function(t){e.ActionClick(e.userID)},children:Object(v.jsxs)("div",{className:"row align-items-center",children:[Object(v.jsx)("div",{className:"col-2",children:Object(v.jsx)("img",{className:"direct-chat-img",src:e.photo?e.photo:"dist/img/no-image.png",alt:"message_users_image"})}),Object(v.jsxs)("div",{className:"col-10",children:[Object(v.jsxs)("div",{className:"d-flex w-100 align-items-center justify-content-between",children:[Object(v.jsx)("strong",{children:e.nama}),Object(v.jsx)("small",{children:e.tanggal})]}),Object(v.jsx)("div",{className:"mb-1 small",style:{marginRight:"20px",display:"inline-block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"350px",maxWidth:"350px"},children:e.PesanTerakhir})]})]})})},W=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={userID:"",userData:[{nama:"",gambar:""}],adminData:[{nama:"",gambar:""}],chatBoxMode:!1,dataChat:"",dataHistoryChat:[],listUser:"",contact:[{height:"0",mode:!1}]},e.handleGetListUser=function(){return x.database().ref("/users/").on("value",(function(t){var a=[];t.exists()?Object.keys(t.val()).map((function(e){return a.push({id:e,nama:t.val()&&t.val()[e].Nama,photo:t.val()&&t.val()[e].Profile_Picture}),a})):console.log("tidak chat"),e.setState({listUser:a})}))},e.handleSelectUser=function(t){var a=t.target.options.selectedIndex;if(0===a);else{console.log("id user yang di pilih",t.target.options[a].getAttribute("data-key"));var n=t.target.options[a].getAttribute("data-key");e.setState({userID:n,chatBoxMode:!0,userData:[{nama:"",gambar:""}]}),e.handleGetDataUser(n),e.handleGetChat(n)}},e.handleClickItemUserChat=function(t){console.log("ID user chat",t),e.setState({userID:t,chatBoxMode:!0,userData:[{nama:"",gambar:""}]}),e.handleGetDataUser(t),e.handleGetChat(t)},e.handleGetDataUser=function(t){return x.database().ref("/users/"+t).once("value").then((function(t){e.setState({userData:[{nama:t.val()&&t.val().Nama,photo:t.val()&&t.val().Profile_Picture}]})}),(function(e){e&&console.log("read failed",e)}))},e.handleGetDataAdmin=function(){return x.database().ref("/users/zAhbiHR06ZQbwSdTiT6ftB91BH62").once("value").then((function(t){e.setState({adminData:[{nama:t.val()&&t.val().Nama,photo:t.val()&&t.val().Profile_Picture}]})}),(function(e){e&&console.log("read failed",e)}))},e.handleGetChat=function(t){return x.database().ref("/chat/"+t).on("value",(function(t){var a=[];t.exists()?Object.keys(t.val()).map((function(e){return a.push({id:e,data:t.val()[e]}),a})):console.log("tidak ada chat"),e.setState({dataChat:a}),console.log("data chat: ",a)}))},e.getListPrimarykeyUserWasChat=function(){x.database().ref("/chat/").on("value",(function(t){var a=[];t.exists()?Object.keys(t.val()).map((function(e){return a.push({id:e}),a})):console.log("tidak chat"),e.setState({dataHistoryChat:a},(function(){e.handleHistoryChat()}))}))},e.handleHistoryChat=Object(d.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],e.state.dataHistoryChat.length>0?e.state.dataHistoryChat.map(function(){var t=Object(d.a)(g.a.mark((function t(n){var s,r,c,i,l,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dataUserForHistoryChat(n.id);case 2:return s=t.sent,t.next=5,e.dataLastChat(n.id);case 5:r=t.sent,c=s[0].nama,i=s[0].photo,l=r[0].tanggal,o=r[0].lastChat,a.push({id:n.id,nama:c,photo:i,tanggalLastChat:l,lastChat:o}),e.setState({dataHistoryChat:a},(function(){}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):console.log("data kosong");case 2:case"end":return t.stop()}}),t)}))),e.dataUserForHistoryChat=function(e){var t=[];return new Promise((function(a){x.database().ref("/users/"+e).on("value",(function(e){t.push({nama:e.val()&&e.val().Nama,photo:e.val()&&e.val().Profile_Picture}),a(t)}))}))},e.dataLastChat=function(e){var t=[];return new Promise((function(a){x.database().ref("/chat/"+e).limitToLast(1).on("value",(function(e){Object.keys(e.val()).map((function(a){return t.push({lastChat:e.val()&&e.val()[a].Pesan,tanggal:e.val()&&e.val()[a].Waktu}),t})),a(t)}))}))},e.showContact=function(t){!1===e.state.contact[0].mode?e.setState({contact:[{height:200,mode:!0}]}):e.setState({contact:[{height:0,mode:!1}]})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.handleGetDataAdmin(),this.getListPrimarykeyUserWasChat(),this.handleGetListUser()}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"chatbox",children:[Object(v.jsxs)("div",{className:"direct-chat d-flex flex-column align-items-stretch flex-shrink-0 bg-white",children:[Object(v.jsxs)("div",{className:"d-flex align-items-center flex-shrink-0 p-3 link-dark text-decoration-none border-bottom",children:[Object(v.jsx)("span",{className:"fs-5 fw-semibold select-user",children:"Pilih User"}),Object(v.jsxs)("select",{className:"form-control",id:"Frm_Chat_User",onChange:function(t){return e.handleSelectUser(t)},children:[Object(v.jsx)("option",{}),this.state.listUser.length>0?Object(v.jsx)(n.Fragment,{children:this.state.listUser.map((function(e){return Object(v.jsx)("option",{"data-key":e.id,children:e.nama},e.id)}))}):null]}),Object(v.jsx)("button",{type:"button",className:"btn btn-tool","data-toggle":"tooltip",title:"Contacts","data-widget":"chat-pane-toggle",onClick:this.showContact,children:Object(v.jsx)("i",{className:"fas fa-comments"})})]}),Object(v.jsxs)("div",{className:"list-group list-group-flush border-bottom scrollarea",children:[Object(v.jsx)("div",{className:"card-body",style:{height:this.state.contact[0].height},children:Object(v.jsx)("div",{className:"direct-chat-contacts",children:Object(v.jsx)("ul",{className:"contacts-list",children:this.state.listUser.length>0?Object(v.jsx)(n.Fragment,{children:this.state.listUser.map((function(t){return Object(v.jsxs)("li",{onClick:function(){return e.handleClickItemUserChat(t.id)},children:[Object(v.jsx)("img",{className:"contacts-list-img css-pointer",src:t.photo?t.photo:"dist/img/no-image.png",width:"40",height:"40",alt:"userkjahw.dh"}),Object(v.jsx)("div",{className:"nama-contactnya",children:t.nama})]},t.id)}))}):null})})}),this.state.dataHistoryChat.length>0?Object(v.jsx)(n.Fragment,{children:this.state.dataHistoryChat.map((function(t){return console.log("data yang di render",t),Object(v.jsx)($,{userID:t.id,nama:t.nama,photo:t.photo,tanggal:t.tanggalLastChat,PesanTerakhir:t.lastChat,ActionClick:function(t){return e.handleClickItemUserChat(t)}},t.id)}))}):null]})]}),this.state.chatBoxMode?Object(v.jsx)(K,{UID:this.state.userID,dataUser:this.state.userData,dataAdmin:this.state.adminData,chatData:this.state.dataChat}):null]})}}]),a}(n.Component),Q=W,Z=a(9),X=a(26),ee=Object(n.createContext)(),te=function(e){var t=Object(n.useState)("loading"),a=Object(k.a)(t,2),s=a[0],r=a[1];return console.log("datauser firebase",s),Object(n.useEffect)((function(){var e=Object(X.b)(p,r);return function(){return e}}),[]),Object(v.jsx)(ee.Provider,Object(c.a)({value:s},e))},ae=ee.Consumer,ne=(a(120),function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={userId:JSON.parse(localStorage.getItem("UserId")),nama:"",email:"",telepon:"",alamat:"",setimage:"",setUrl:"",tokenNotif:"",progress:"0",setProgress:"0",foto:"Pilih Foto",statusUpload:!1,notifikasiData:[],orderData:[]},e.handleChangeInput=function(t){e.setState(Object(Z.a)({},t.target.id,t.target.value))},e.fileSelectHandler=function(t){e.setState({setimage:t.target.files[0],foto:t.target.files[0].name})},e.handleSaveProfile=function(){var t=Object(X.a)().currentUser;Object(X.e)(t,{displayName:e.state.nama,photoURL:e.state.setUrl}).then((function(){console.log("Now Data User",t)})),x.database().ref("users/"+e.state.userId).set({Nama:e.state.nama,Email:e.state.email,Telepon:e.state.telepon,Alamat:e.state.alamat,Profile_Picture:e.state.setUrl,TokenNotif:e.state.tokenNotif?e.state.tokenNotif:"",notifikasi:e.state.notifikasiData?e.state.notifikasiData:[],order:e.state.orderData?e.state.orderData:[]},(function(t){t?alert("Gagal Simpan"):(U([{icon:"success",title:"Profile berhasil di perbarui."}]),console.log(e.state.nama,e.state.email,e.state.telepon,e.state.alamat,e.state.setUrl,e.state.tokenNotif))}))},e.handleUploadImage=function(){""===e.state.setimage?(console.log("Foto belum  di pilih"),U([{icon:"error",title:"File belum di pilih"}])):f.ref("profile/".concat(e.state.userId,".jpg")).put(e.state.setimage).on("state_changed",(function(t){var a=Math.round(t.bytesTransferred/t.totalBytes*100);e.setState({statusUpload:!0,setProgress:a}),console.log(e.state.setProgress+" %")}),(function(e){console.log(e)}),(function(){f.ref("profile").child(e.state.userId+".jpg").getDownloadURL().then((function(t){e.setState({setUrl:t});var a=Object(X.a)().currentUser;Object(X.e)(a,{displayName:e.state.nama,photoURL:e.state.setUrl}).then((function(){console.log("New Data User",a)})),x.database().ref("users/"+e.state.userId).set({Nama:e.state.nama,Email:e.state.email,Telepon:e.state.telepon,Alamat:e.state.alamat,Profile_Picture:e.state.setUrl,TokenNotif:e.state.tokenNotif?e.state.tokenNotif:"",notifikasi:e.state.notifikasiData?e.state.notifikasiData:[],order:e.state.orderData?e.state.orderData:[]},(function(t){t?alert("Gagal Simpan Ke Database"):(U([{icon:"success",title:"Profile berhasil di perbarui."}]),console.log(e.state.setUrl),e.setState({setimage:"",statusUpload:!1,foto:"Pilih Foto"}))}))}))}))},e.handleChangePassword=function(){Object(X.c)(Object(X.a)(),e.state.email).then((function(){console.log(e.state.email),alert("Email Reset Password Telah Dikirim")})).catch((function(e){console.log(e.code)}))},e.testhandle=function(){console.log(e.state.setimage)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(g.a.mark((function e(){var t=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Profile Log",this.props),console.log("Profile Log 2",this),e.abrupt("return",x.database().ref("/users/"+this.state.userId).once("value").then((function(e){t.setState({nama:e.val()&&e.val().Nama,email:JSON.parse(localStorage.getItem("UserEmail")),telepon:e.val()&&e.val().Telepon,alamat:e.val()&&e.val().Alamat,setUrl:e.val()&&e.val().Profile_Picture,tokenNotif:e.val()&&e.val().TokenNotif,notifikasiData:e.val()&&e.val().notifikasi,orderData:e.val()&&e.val().order},(function(){return console.log("result = ",t.state)})),console.log("Photo Profile Link ",t.state.setUrl)}),(function(e){e&&console.log("read failed",e)})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"card card-widget widget-user shadow-lg",children:[Object(v.jsx)("div",{className:"widget-user-header text-white",style:{background:'url("dist/img/bg.jpeg") center center',height:180},children:Object(v.jsx)("h3",{className:"widget-user-username text-right",children:JSON.parse(localStorage.getItem("EmailUser"))})}),Object(v.jsx)("div",{className:"widget-user-image",children:null!=this.state.setUrl?Object(v.jsx)("img",{className:"img-circle",src:this.state.setUrl,alt:"User Avatar",style:{width:150,height:150},onError:function(e){var t=e.currentTarget;t.onerror=null,t.src="dist/img/no-image.png"}}):Object(v.jsx)("img",{className:"img-circle",src:"dist/img/no-image.png",alt:"User Avatar",style:{width:150,height:150},onError:function(e){var t=e.currentTarget;t.onerror=null,t.src="dist/img/no-image.png"}})}),Object(v.jsx)("div",{className:"card-footer",children:Object(v.jsx)("div",{className:"row",style:{height:20}})})]}),Object(v.jsxs)("div",{className:"card card-primary",children:[Object(v.jsx)("div",{className:"card-header",children:Object(v.jsx)("h3",{className:"card-title",children:"Profile"})}),Object(v.jsxs)("div",{className:"FormProfile",children:[Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Nama"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"nama",placeholder:"Nama",value:this.state.nama?this.state.nama:"",onChange:this.handleChangeInput})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email"}),Object(v.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",value:this.state.email?this.state.email:"",onChange:this.handleChangeInput,disabled:!0})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Telepon"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"telepon",placeholder:"Nomor Telepon",value:this.state.telepon?this.state.telepon:"",onChange:this.handleChangeInput})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Alamat"}),Object(v.jsx)("textarea",{className:"form-control",rows:3,placeholder:"Alamat",value:this.state.alamat?this.state.alamat:"",id:"alamat",onChange:this.handleChangeInput})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"exampleInputFile",children:"Upload Foto"}),Object(v.jsxs)("div",{className:"input-group",children:[this.state.statusUpload?Object(v.jsx)("div",{className:"progress-bar",children:Object(v.jsx)("span",{className:"progress-bar-inner",style:{width:"".concat(this.state.setProgress,"%")}})}):Object(v.jsxs)("div",{className:"custom-file",children:[Object(v.jsx)("input",{type:"file",className:"custom-file-input",id:"foto",accept:"image/png, image/gif, image/jpeg",onChange:this.fileSelectHandler}),Object(v.jsx)("label",{className:"custom-file-label",htmlFor:"exampleInputFile",children:this.state.foto})]}),Object(v.jsx)("div",{className:"input-group-append",children:Object(v.jsx)("span",{className:"input-group-text bg-danger",onClick:this.handleUploadImage,children:this.state.statusUpload?this.state.setProgress+"%":"Upload"})})]})]})]}),Object(v.jsxs)("div",{className:"card-footer",children:[Object(v.jsx)("button",{className:"btn btn-primary",onClick:this.handleSaveProfile,children:"Simpan"}),Object(v.jsx)("button",{className:"btn btn-primary change-password",onClick:this.handleChangePassword,children:"Ganti Password"})]})]})]})]})}}]),a}(n.Component)),se=(q=ne,function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(v.jsx)(ae,{children:function(t){return Object(v.jsx)(q,Object(c.a)(Object(c.a)({},e.props),t))}})}}]),a}(n.Component));x.setLogLevel("silent");var re=function(e){var t=Object(n.useState)([]),a=Object(k.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(!1),l=Object(k.a)(i,2),o=l[0],j=l[1],u=Object(n.useState)(),b=Object(k.a)(u,2),h=b[0],m=b[1],O=Object(n.useState)(),p=Object(k.a)(O,2),N=p[0],y=p[1],w=Object(n.useState)(),S=Object(k.a)(w,2),P=S[0],A=S[1],D=Object(n.useState)(),C=Object(k.a)(D,2),I=C[0],T=C[1],M=Object(n.useState)(""),B=Object(k.a)(M,2),F=B[0],E=B[1],L=Object(n.useState)(""),J=Object(k.a)(L,2),H=J[0],_=J[1],G=Object(n.useState)(),z=Object(k.a)(G,2),Y=z[0],V=z[1],K=Object(n.useState)("Submit Payment"),q=Object(k.a)(K,2),$=q[0],W=q[1],Q=Object(n.useState)(),Z=Object(k.a)(Q,2),X=Z[0],ee=Z[1],te=Object(n.useState)("btn-success"),ae=Object(k.a)(te,2),ne=ae[0],se=ae[1],re=Object(n.useCallback)((function(){var e=JSON.parse(localStorage.getItem("OrderId"));return x.database().ref("users").once("value",(function(t){Object.keys(t.val()).map((function(t){return x.database().ref("users/"+t+"/order").orderByChild("OrderId").equalTo(e).once("value",(function(e){if(e.exists())return console.log(e.val()),console.log(t),x.database().ref("users/"+t).once("value",(function(e){var a;console.log(e.val()),V({iduser:t,address:e.val().Nama,phone:e.val().Telepon,email:e.val().Email,token:null===(a=e.val())||void 0===a?void 0:a.TokenNotif})}))}))}))}))}),[]);Object(n.useEffect)((function(){!1===o&&(!function(){var e=JSON.parse(localStorage.getItem("OrderId"));console.log(e),x.database().ref("/order/").orderByChild("OrderId").equalTo(e).on("value",(function(e){var t=[];e.exists()?Object.keys(e.val()).map((function(a){return t.push({id:a,data:e.val()[a]}),t})):console.log("Data tidak ditemukan"),r(t[0].data)}))}(),re(),j(!0)),function(){var e=s.OrderId;if(null!=e){var t=Array.from(e);t.splice(0,3);var a=""+Number(t.join("")),n="000000",r=n.substring(0,n.length-a.length)+a;m(r)}}(),function(){var e=s.Ruangan;if(null!=e){var t=Array.from(e);t.splice(0,5);var a=Number(t.join(""));y(a)}}(),function(){var e=s.Paket;null!=e&&A("PERJAM"===e?"30,000":"HARIAN"===e?"100,000":"HARIAN(PELAJAR)"===e?"75.000":"BULANAN 25JAM"===e?"450,000":"BULANAN 50JAM"===e?"650,000":"BULANAN 100JAM"===e?"900,000":"BULANAN TANPA BATAS"===e?"1,200,000":"0")}(),function(){if(null!=s.TanggalSewa){var e=s.TanggalSewa,t=s.TanggalSelesai,a=e.split("-"),n=t.split("-"),r=new Date(a[2],parseInt(a[1])-1,a[0]),c=(new Date(n[2],parseInt(n[1])-1,n[0]).getTime()-r.getTime())/864e5,i=Math.floor(c/30),l=Math.floor(i/12);0!==l?T(l+" Year"):0!==i?T(i+" Month"):0!==c?T(c+" Days"):console.log("Error")}}(),null!=s.BuktiPembayaran&&(""===s.BuktiPembayaran?W("Submit Payment"):W("View")),function(){if(null!=s.JatuhTempo){for(var e="".concat(s.JatuhTempo).split(""),t=e.length,a=0;a<t;a++)"-"===e[a]&&(e[a]="/");var n=e.join("");E(n)}}(),function(){var e=new Date,t=e.getDate()+"/"+parseInt(e.getMonth()+1)+"/"+e.getFullYear();_(t)}()}),[o,s,e,re]);var ce=function(){var e=Object(d.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var t=s.OrderId;return x.database().ref("/order/").orderByChild("OrderId").equalTo(t).once("value",(function(t){Object.keys(t.val()).map((function(t){return e(t),t}))}))}));case 2:a=e.sent,"Upload"===$&&(null!=X.Filenya?(n=s.OrderId+X.Type,f.ref("payment/".concat(n)).put(X.Filenya).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);W("Uploading... ".concat(t," %")),se("btn-danger"),console.log(t+" %")}),(function(e){console.log(e)}),(function(){f.ref("payment").child(n).getMetadata().then((function(e){x.database().ref("order/"+a).set({OrderId:s.OrderId,Paket:s.Paket,JumlahPaket:s.JumlahPaket,NamaPemesan:s.NamaPemesan,Ruangan:s.Ruangan,TanggalSewa:s.TanggalSewa,TanggalSelesai:s.TanggalSelesai,Status:s.Status,TotalPembayaran:s.TotalPembayaran,BuktiPembayaran:e.name},(function(t){t?alert("Gagal Simpan Ke Database"):(ie(),le(),U([{icon:"success",title:"Bukti Pembayaran Berhasil Di Upload"}]),r(Object(c.a)(Object(c.a)({},s),{},{BuktiPembayaran:e.name})),ee(Object(c.a)(Object(c.a)({},X),{},{Filenya:null})),W("View"))}))}))}))):(console.log("Foto belum  di pilih"),U([{icon:"error",title:"File belum di pilih"}])));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(d.a)(g.a.mark((function e(){var t,a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null===Y||void 0===Y?void 0:Y.token,a={to:t,priority:"high",notification:{title:"Konfirmasi Pembayaran",body:"Pesanan anda dengan OrderId ".concat(s.OrderId," telah dikonfirmasi pembayarannya")},data:{Action:"CheckOut",OrderID:s.OrderId}},e.next=4,fetch("https://fcm.googleapis.com/fcm/send",{method:"POST",headers:{Authorization:"key=AAAA6jj0k_w:APA91bFVagvVrQ1UsvzH-GglbdFAzvfuGhE1A6KABx3Y3QdiiyKNba9RG6zAkYqm3oAd23M-l7BuhzatGHAOHln6L2lho1ZrhMUM5DB678r2Z9_Bd79z46HCiezO9q9zD6CaiTa_h6C2","Content-Type":"application/json"},body:JSON.stringify(a)}).then(console.log(a));case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,console.log(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(d.a)(g.a.mark((function e(){var t,a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R(new Date),a=x.database().ref("users/".concat(Y.iduser,"/notifikasi")),n=a.push(),e.next=5,n.set({Aksi:"CheckOut",Date:t,Isi:"Pesanan anda dengan OrderId ".concat(s.OrderId," telah dikonfirmasi pembayarannya"),Judul:"Konfirmasi Pembayaran",Meta_Data:s.OrderId,Status:"Unread",Target:Y.iduser},(function(e){e&&alert("Gagal Simpan")}));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){console.log(Y)}),[Y]),Object(v.jsx)("section",{className:"content",children:Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsxs)("div",{className:"invoice p-3 mb-3",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsxs)("h4",{children:[Object(v.jsx)("img",{src:"dist/img/logo-header-coklat.png",alt:"Logo Head",style:{height:"auto",width:300}}),Object(v.jsxs)("small",{className:"float-right",children:["Date: ",H," "]})]})})}),Object(v.jsxs)("div",{className:"row invoice-info",children:[Object(v.jsxs)("div",{className:"col-sm-4 invoice-col",children:["From",Object(v.jsxs)("address",{children:[Object(v.jsx)("strong",{children:"Kedasi | Tanjung Duren"}),Object(v.jsx)("br",{}),"Jl. Tanjung Duren Timur 6 No.2A, RT.7/RW.3, Tj. Duren Selatan, Grogol petamburan,",Object(v.jsx)("br",{}),"Jakarta Barat, Daerah Khusus Ibukota Jakarta 11470",Object(v.jsx)("br",{}),"Phone: 081808389450",Object(v.jsx)("br",{}),"Email: ask@kedasi.co.id"]})]}),Object(v.jsxs)("div",{className:"col-sm-4 invoice-col",children:["To",Object(v.jsxs)("address",{children:[Object(v.jsx)("strong",{children:s.NamaPemesan}),Object(v.jsx)("br",{}),"Address: ",null===Y||void 0===Y?void 0:Y.address,Object(v.jsx)("br",{}),"Phone: ",null===Y||void 0===Y?void 0:Y.phone,Object(v.jsx)("br",{}),"Email: ",null===Y||void 0===Y?void 0:Y.email]})]}),Object(v.jsxs)("div",{className:"col-sm-4 invoice-col",children:[Object(v.jsxs)("b",{children:["Invoice #",h]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Order ID:"})," ",s.OrderId,Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Payment Due:"})," ",F,Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Account:"})," ",null===Y||void 0===Y?void 0:Y.iduser]})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12 table-responsive",children:Object(v.jsxs)("table",{className:"table table-striped",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Qty"}),Object(v.jsx)("th",{children:"Description"}),Object(v.jsx)("th",{children:"Price"}),Object(v.jsx)("th",{children:"Duration"}),Object(v.jsx)("th",{children:"Subtotal"})]})}),Object(v.jsx)("tbody",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:s.JumlahPaket}),Object(v.jsxs)("td",{children:["Sewa Ruangan ",N,"\xa0",s.Paket]}),Object(v.jsxs)("td",{children:["Rp ",P]}),Object(v.jsx)("td",{children:I}),Object(v.jsxs)("td",{children:["Rp ",s.TotalPembayaran]})]})})]})})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-6"}),Object(v.jsxs)("div",{className:"col-6",children:[Object(v.jsxs)("p",{className:"lead",children:["Amount Due ",F]}),Object(v.jsx)("div",{className:"table-responsive",children:Object(v.jsx)("table",{className:"table",children:Object(v.jsx)("tbody",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Total:"}),Object(v.jsxs)("td",{children:["Rp ",s.TotalPembayaran]})]})})})})]})]}),Object(v.jsx)("div",{className:"row no-print",children:Object(v.jsxs)("div",{className:"col-12",children:[Object(v.jsxs)("button",{className:"btn btn-default",onClick:function(){window.addEventListener("load",window.print())},children:[Object(v.jsx)("i",{className:"fas fa-print"})," Print"]}),"View"===$?Object(v.jsxs)("button",{type:"button",className:"btn btn-warning float-right",onClick:function(){f.ref("payment").child(s.BuktiPembayaran).getDownloadURL().then((function(e){window.open(e,"_blank","noopener,noreferrer")}))},children:[Object(v.jsx)("i",{className:"far fa-credit-card"})," View Payment"]}):Object(v.jsxs)(n.Fragment,{children:[Object(v.jsx)("input",{type:"file",id:"fileUpload",style:{display:"none"},accept:"image/png, image/jpeg, image/jpg",onChange:function(e){var t;if(console.log(e.target.files[0]),W("Upload"),se("btn-primary"),"image/png"===e.target.files[0].type)ee({Filenya:e.target.files[0],NamaFile:null===(t=e.target.files[0])||void 0===t?void 0:t.name,Type:".png"});else if("image/jpeg"===e.target.files[0].type){var a;ee({Filenya:e.target.files[0],NamaFile:null===(a=e.target.files[0])||void 0===a?void 0:a.name,Type:".jpeg"})}else if("image/jpg"===e.target.files[0].type){var n;ee({Filenya:e.target.files[0],NamaFile:null===(n=e.target.files[0])||void 0===n?void 0:n.name,Type:".jpg"})}}}),Object(v.jsxs)("button",{className:"btn ".concat(ne," float-right"),onClick:function(){"Submit Payment"===$?document.getElementById("fileUpload").click():"Upload"===$&&ce()},children:["Upload"!==$&&"View"!==$&&"Submit Payment"!==$?Object(v.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):"Upload"===$?Object(v.jsx)("i",{className:"fas fa-upload"}):Object(v.jsx)("i",{className:"far fa-credit-card"}),"\xa0",$]})]})]})})]})})})})})};var ce=function(){return Object(v.jsx)("div",{className:"wrapper",children:Object(v.jsxs)("section",{className:"invoice",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12",children:Object(v.jsxs)("h2",{className:"page-header",children:[Object(v.jsx)("i",{className:"fas fa-globe"})," AdminLTE, Inc.",Object(v.jsx)("small",{className:"float-right",children:"Date: 2/10/2014"})]})})}),Object(v.jsxs)("div",{className:"row invoice-info",children:[Object(v.jsxs)("div",{className:"col-sm-4 invoice-col",children:["From",Object(v.jsxs)("address",{children:[Object(v.jsx)("strong",{children:"Admin, Inc."}),Object(v.jsx)("br",{}),"795 Folsom Ave, Suite 600",Object(v.jsx)("br",{}),"San Francisco, CA 94107",Object(v.jsx)("br",{}),"Phone: (804) 123-5432",Object(v.jsx)("br",{}),"Email: info@almasaeedstudio.com"]})]}),Object(v.jsxs)("div",{className:"col-sm-4 invoice-col",children:["To",Object(v.jsxs)("address",{children:[Object(v.jsx)("strong",{children:"John Doe"}),Object(v.jsx)("br",{}),"795 Folsom Ave, Suite 600",Object(v.jsx)("br",{}),"San Francisco, CA 94107",Object(v.jsx)("br",{}),"Phone: (555) 539-1037",Object(v.jsx)("br",{}),"Email: john.doe@example.com"]})]}),Object(v.jsxs)("div",{className:"col-sm-4 invoice-col",children:[Object(v.jsx)("b",{children:"Invoice #007612"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Order ID:"})," 4F3S8J",Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Payment Due:"})," 2/22/2014",Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Account:"})," 968-34567"]})]}),Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-12 table-responsive",children:Object(v.jsxs)("table",{className:"table table-striped",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Qty"}),Object(v.jsx)("th",{children:"Product"}),Object(v.jsx)("th",{children:"Serial #"}),Object(v.jsx)("th",{children:"Description"}),Object(v.jsx)("th",{children:"Subtotal"})]})}),Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"1"}),Object(v.jsx)("td",{children:"Call of Duty"}),Object(v.jsx)("td",{children:"455-981-221"}),Object(v.jsx)("td",{children:"El snort testosterone trophy driving gloves handsome"}),Object(v.jsx)("td",{children:"$64.50"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"1"}),Object(v.jsx)("td",{children:"Need for Speed IV"}),Object(v.jsx)("td",{children:"247-925-726"}),Object(v.jsx)("td",{children:"Wes Anderson umami biodiesel"}),Object(v.jsx)("td",{children:"$50.00"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"1"}),Object(v.jsx)("td",{children:"Monsters DVD"}),Object(v.jsx)("td",{children:"735-845-642"}),Object(v.jsx)("td",{children:"Terry Richardson helvetica tousled street art master"}),Object(v.jsx)("td",{children:"$10.70"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"1"}),Object(v.jsx)("td",{children:"Grown Ups Blue Ray"}),Object(v.jsx)("td",{children:"422-568-642"}),Object(v.jsx)("td",{children:"Tousled lomo letterpress"}),Object(v.jsx)("td",{children:"$25.99"})]})]})]})})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-6",children:[Object(v.jsx)("p",{className:"lead",children:"Payment Methods:"}),Object(v.jsx)("img",{src:"../../dist/img/credit/visa.png",alt:"Visa"}),Object(v.jsx)("img",{src:"../../dist/img/credit/mastercard.png",alt:"Mastercard"}),Object(v.jsx)("img",{src:"../../dist/img/credit/american-express.png",alt:"American Express"}),Object(v.jsx)("img",{src:"../../dist/img/credit/paypal2.png",alt:"Paypal"}),Object(v.jsx)("p",{className:"text-muted well well-sm shadow-none",style:{marginTop:10},children:"Etsy doostang zoodles disqus groupon greplin oooj voxy zoodles, weebly ning heekya handango imeem plugg dopplr jibjab, movity jajah plickers sifteo edmodo ifttt zimbra."})]}),Object(v.jsxs)("div",{className:"col-6",children:[Object(v.jsx)("p",{className:"lead",children:"Amount Due 2/22/2014"}),Object(v.jsx)("div",{className:"table-responsive",children:Object(v.jsx)("table",{className:"table",children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{style:{width:"50%"},children:"Subtotal:"}),Object(v.jsx)("td",{children:"$250.30"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Tax (9.3%)"}),Object(v.jsx)("td",{children:"$10.34"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Shipping:"}),Object(v.jsx)("td",{children:"$5.80"})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Total:"}),Object(v.jsx)("td",{children:"$265.24"})]})]})})})]})]})]})})};var ie=Object(o.i)((function(e){var t=Object(o.h)();return Object(n.useEffect)((function(){}),[]),Object(v.jsx)(l.a,{children:Object(v.jsx)("div",{className:"hold-transition sidebar-mini layout-fixed",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(y,{}),Object(v.jsx)(w,{}),Object(v.jsx)("div",{className:"content-wrapper",children:Object(v.jsxs)(o.d,{children:[Object(v.jsx)(o.b,{path:"/profile",children:Object(v.jsx)(se,{})}),Object(v.jsx)(o.b,{path:"/ruangan",children:Object(v.jsx)(J,{})}),Object(v.jsx)(o.b,{path:"/notifikasi",children:Object(v.jsx)(z,{})}),Object(v.jsx)(o.b,{path:"/pesan",children:Object(v.jsx)(Q,{})}),Object(v.jsx)(o.b,{path:"/invoice",children:Object(v.jsx)(re,{})}),Object(v.jsx)(o.b,{path:"/invoice-print",children:Object(v.jsx)(ce,{})}),Object(v.jsx)(o.b,{path:"/",children:Object(v.jsx)(A,{})})]})}),"/invoice"===t.pathname?null:Object(v.jsx)(S,{})]})})})})),le=(a(121),function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:""},e.handleChangeInput=function(t){e.setState(Object(Z.a)({},t.target.id,t.target.value))},e.handleLogin=function(){var t=Object(X.a)();Object(X.d)(t,e.state.email,e.state.password).then((function(t){var a=t.user;console.log(a),console.log("Login Sucess"),console.log("UserId: ",a.uid),console.log("Email: ",a.email),localStorage.setItem("UserId",JSON.stringify(a.uid)),localStorage.setItem("UserEmail",JSON.stringify(a.email)),U([{icon:"success",title:"Login Berhasil"}]),e.props.history.push("/")})).catch((function(e){var t=e.code,a=e.message;console.log("error code: ",t),console.log("error messege: ",a),alert("Email atau Password salah")}))},e.hangleKeyPress=function(t){"Enter"===t.key&&e.handleLogin()},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"badan text-center",children:Object(v.jsxs)("div",{className:"form-signin",children:[Object(v.jsx)("img",{className:"mb-4",src:"/dist/img/kedasi logo.jpg",alt:"Logo",width:72,height:57}),Object(v.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"KEDASI"}),Object(v.jsx)("div",{className:"form-floating",children:Object(v.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",onChange:this.handleChangeInput})}),Object(v.jsx)("div",{className:"form-floating",children:Object(v.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",onChange:this.handleChangeInput,onKeyPress:this.hangleKeyPress})}),Object(v.jsx)("button",{className:"w-100 btn btn-lg btn-primary btn-login",onClick:this.handleLogin,children:"Masuk"}),Object(v.jsx)("hr",{}),Object(v.jsx)("div",{className:"text-center",children:Object(v.jsx)(l.b,{to:"/lupa_password",className:"small",children:"Lupa Password"})}),Object(v.jsx)("p",{className:"mt-5 mb-3 text-muted Copyright",children:"\xa9 2020\u20132025"})]})})}}]),a}(n.Component)),oe=Object(o.i)(le),de=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={email:""},e.handleChangeInput=function(t){e.setState(Object(Z.a)({},t.target.id,t.target.value))},e.handleSendEmail=function(){Object(X.c)(Object(X.a)(),e.state.email).then((function(){console.log(e.state.email),alert("Email Reset Password Telah Dikirim"),e.props.history.push("/login")})).catch((function(e){console.log(e.code),alert("Email Tidak Terdaftar")}))},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"badan text-center",children:Object(v.jsxs)("div",{className:"form-signin",children:[Object(v.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Forgot Password"}),Object(v.jsx)("div",{className:"form-floating",children:Object(v.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",onChange:this.handleChangeInput,style:{marginBottom:20}})}),Object(v.jsx)("button",{className:"w-100 btn btn-lg btn-primary btn-login",onClick:this.handleSendEmail,children:"Submit"})]})})}}]),a}(n.Component),je=Object(o.i)(de),ue=["children"];var be=function(){return Object(v.jsx)(te,{children:Object(v.jsxs)(l.a,{children:[Object(v.jsx)("div",{className:"preloader flex-column justify-content-center align-items-center",children:Object(v.jsx)("img",{className:"animation__shake",src:"/dist/img/kedasi logo.jpg",alt:"AdminLTELogo",height:60,width:60})}),Object(v.jsxs)(o.d,{children:[Object(v.jsx)(o.b,{exact:!0,path:"/login",children:Object(v.jsx)(oe,{})}),Object(v.jsx)(o.b,{exact:!0,path:"/lupa_password",children:Object(v.jsx)(je,{})}),Object(v.jsx)(he,{path:"/",children:Object(v.jsx)(ie,{})})]})]})})};function he(e){var t=e.children,a=Object(i.a)(e,ue),s=function(){var e=Object(n.useContext)(ee);return Object(c.a)(Object(c.a)({},e),{},{isAuthenticated:null!=e})}().isAuthenticated;return Object(v.jsx)(o.b,Object(c.a)(Object(c.a)({},a),{},{render:function(e){var a=e.location;return s?t:Object(v.jsx)(o.a,{to:{pathname:"/login",state:{from:a}}})}}))}var me=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,126)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};r.a.render(Object(v.jsx)(be,{}),document.getElementById("root")),me()},82:function(e,t,a){},95:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.06858401.chunk.js.map